<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>PA&#39;s Blog</title>
  
  <subtitle>pa@f534</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://pa.radonyl.xyz/"/>
  <updated>2019-12-01T12:17:34.141Z</updated>
  <id>http://pa.radonyl.xyz/</id>
  
  <author>
    <name>Puzzled Alex</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | è°ƒè¯•ä¸æµ‹è¯•</title>
    <link href="http://pa.radonyl.xyz/2019/12/01/802-11g-Transmitter-validate-and-debug/"/>
    <id>http://pa.radonyl.xyz/2019/12/01/802-11g-Transmitter-validate-and-debug/</id>
    <published>2019-12-01T09:15:26.000Z</published>
    <updated>2019-12-01T12:17:34.141Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ†æ¨¡å—è®¾è®¡å®Œæˆåï¼Œéœ€è¦è¿›è¡Œç»„è£…å’Œè°ƒè¯•ã€‚æŒ‰ç…§æ¡†å›¾å°†æ¨¡å—çº§è”ï¼Œæ¥ä¸‹æ¥å¯¹æ¨¡å—çš„æ—¶åºã€æ•°æ®å®Œæ•´æ€§å’Œæ•°æ®æ­£ç¡®æ€§åœ¨ä»¿çœŸå±‚é¢ä¸Šè¿›è¡ŒéªŒè¯ã€‚ä»¿çœŸéªŒè¯é€šè¿‡åï¼Œå°†æ‰€æœ‰çš„æ¨¡å—æ‰“åŒ…æˆTx80211è‡ªå®šä¹‰IPæ ¸ï¼ŒåŠ å…¥AD9361çš„IPæ ¸Block Designï¼Œè¿›è¡Œæ¥ä¸‹æ¥çš„æ¿ä¸ŠéªŒè¯ã€‚<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/31512-draft-bd" alt="31512-draft-bd"></p><h1 id="å‘å°„æœºModelsimä»¿çœŸéªŒè¯"><a href="#å‘å°„æœºModelsimä»¿çœŸéªŒè¯" class="headerlink" title="å‘å°„æœºModelsimä»¿çœŸéªŒè¯"></a>å‘å°„æœºModelsimä»¿çœŸéªŒè¯</h1><p>é¦–å…ˆä½¿ç”¨matlabæ„é€ 802.11gæ•°æ®åŒ…ï¼Œå¯¼å‡ºåŸºå¸¦äºŒè¿›åˆ¶æµå’Œç”Ÿæˆå¥½çš„åŸºå¸¦ä¿¡å·ã€‚å°†matlabçš„åŸºå¸¦äºŒè¿›åˆ¶æµå‚¨å­˜åœ¨Tx_Ramä¸­ï¼Œå¹¶ç¼–å†™testbenchï¼Œæ¥ä¸‹æ¥åœ¨modelsimä¸­è¿›è¡ŒåŸºå¸¦æ•°æ®ç”Ÿæˆå™¨çš„å…¨ä»¿çœŸã€‚é€šè¿‡Modelsimè§‚å¯Ÿå¹¶å¯¼å‡ºç”Ÿæˆçš„æ³¢å½¢ï¼Œå†å°†ç”Ÿæˆçš„æ³¢å½¢ä¸Matlabç”Ÿæˆçš„æ ‡å‡†æ•°æ®è¿›è¡Œæ¯”è¾ƒã€‚</p><h4 id="Testbench"><a href="#Testbench" class="headerlink" title="Testbench"></a>Testbench</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">wire</span> [<span class="number">23</span>:<span class="number">0</span>] SIGNAL;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] ram_addr = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>] DATA;</span><br><span class="line">tx_ram TxRam(</span><br><span class="line">    <span class="variable">.addr</span>(ram_addr),</span><br><span class="line">    <span class="variable">.SIGNAL</span>(SIGNAL),</span><br><span class="line">    <span class="variable">.DATA</span>(fifo_din)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">initial</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    sim_idx = <span class="number">0</span>;</span><br><span class="line">    # <span class="number">40000</span>; <span class="comment">// wait clock to lock</span></span><br><span class="line">    <span class="keyword">repeat</span>(<span class="number">2</span>) <span class="keyword">begin</span></span><br><span class="line">        @(<span class="keyword">posedge</span> clk)</span><br><span class="line">        s_config_tdata[<span class="number">23</span>:<span class="number">0</span>] = SIGNAL;</span><br><span class="line">        s_config_tvalid      = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (idx = <span class="number">0</span>; idx &lt; <span class="number">66</span>; idx = idx + <span class="number">1</span>) <span class="keyword">begin</span></span><br><span class="line">            ram_addr   = idx;</span><br><span class="line">            fifo_wr_en = <span class="number">1</span>;</span><br><span class="line">            @(<span class="keyword">posedge</span> clk);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        fifo_wr_en = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (busy) @(<span class="keyword">posedge</span> clk);</span><br><span class="line">        @(<span class="keyword">posedge</span> clk);</span><br><span class="line">        tx_now = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">repeat</span>(<span class="number">20</span>) @(<span class="keyword">posedge</span> clk);</span><br><span class="line">        tx_now = <span class="number">0</span>;</span><br><span class="line">        # <span class="number">2000</span></span><br><span class="line">        <span class="keyword">while</span> (tx_data_valid) @(<span class="keyword">posedge</span> clk);</span><br><span class="line">        sim_idx = sim_idx + <span class="number">1</span>;</span><br><span class="line">        # <span class="number">10000</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">$finish</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="Tx-Ram-èŠ‚é€‰"><a href="#Tx-Ram-èŠ‚é€‰" class="headerlink" title="Tx Ram(èŠ‚é€‰)"></a>Tx Ram(èŠ‚é€‰)</h4><p>ç”¨äºå‚¨å­˜å‘å°„äºŒè¿›åˆ¶åŸºå¸¦æ•°æ®çš„Verilogæ–‡ä»¶ï¼Œç”±matlabå¯¼å‡ºçš„äºŒè¿›åˆ¶æµæ•°æ®ç”Ÿæˆã€‚<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> tx_ram(<span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] addr,</span><br><span class="line">              <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">23</span>:<span class="number">0</span>] SIGNAL,</span><br><span class="line">              <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] DATA);</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] data_ram [<span class="number">100</span>:<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">integer</span> i;</span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="comment">// zeroing ram</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">101</span>; i = i + <span class="number">1</span>)</span><br><span class="line">            data_ram[i] = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// load data</span></span><br><span class="line">        <span class="comment">// generated at Sat Nov 23 17:41:48 2019 from file: E:\matlab_bb.txt</span></span><br><span class="line">        SIGNAL = <span class="number">24'b000000000000100000001011</span>; <span class="comment">// Rate:1101 Len:64</span></span><br><span class="line">        data_ram[<span class="number">0</span>] = <span class="number">0'b00000000</span>; <span class="comment">// 0x00</span></span><br><span class="line">        data_ram[<span class="number">1</span>] = <span class="number">0'b00000000</span>; <span class="comment">// 0x00</span></span><br><span class="line">        data_ram[<span class="number">2</span>] = <span class="number">8'b10000000</span>; <span class="comment">// 0x80</span></span><br><span class="line">        data_ram[<span class="number">3</span>] = <span class="number">8'b00000010</span>; <span class="comment">// 0x02</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        data_ram[<span class="number">62</span>] = <span class="number">8'b00111110</span>; <span class="comment">// 0x3e</span></span><br><span class="line">        data_ram[<span class="number">63</span>] = <span class="number">8'b10101010</span>; <span class="comment">// 0xaa</span></span><br><span class="line">        data_ram[<span class="number">64</span>] = <span class="number">8'b11101111</span>; <span class="comment">// 0xef</span></span><br><span class="line">        data_ram[<span class="number">65</span>] = <span class="number">8'b10111100</span>; <span class="comment">// 0xbc</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">        DATA = data_ram[addr];</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure></p><h4 id="Modelsim-åŸºå¸¦æ•°æ®å…¨ä»¿çœŸç»“æœ"><a href="#Modelsim-åŸºå¸¦æ•°æ®å…¨ä»¿çœŸç»“æœ" class="headerlink" title="Modelsim åŸºå¸¦æ•°æ®å…¨ä»¿çœŸç»“æœ"></a>Modelsim åŸºå¸¦æ•°æ®å…¨ä»¿çœŸç»“æœ</h4><p>è®¾ç½®modelsimæ•æ‰å„æ¨¡å—ä¿¡å·ï¼ŒæŒ‰ç…§æ‰°ç -&gt;å·ç§¯ç¼–ç -&gt;äº¤ç»‡-&gt;æ˜Ÿåº§æ˜ å°„-&gt;æ·»åŠ å¯¼é¢‘-&gt;IFFT-&gt;åŠ çª—çš„é¡ºåºæ’åˆ—ä¿¡å·ï¼Œè§‚å¯Ÿä¿¡å·ä¼ é€’æ—¶åºæ˜¯å¦æ­£ç¡®ï¼Œæ•°æ®æ˜¯å¦å®Œæ•´ã€‚<br>å°†<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/bb-signal-gen-modelsim-total-1" alt="bb-signal-gen-modelsim-total-1"></p><h4 id="åŸºå¸¦ä¿¡å·å‘ç”Ÿå™¨ä¸Matlabæ ‡å‡†æ•°æ®å¯¹æ¯”"><a href="#åŸºå¸¦ä¿¡å·å‘ç”Ÿå™¨ä¸Matlabæ ‡å‡†æ•°æ®å¯¹æ¯”" class="headerlink" title="åŸºå¸¦ä¿¡å·å‘ç”Ÿå™¨ä¸Matlabæ ‡å‡†æ•°æ®å¯¹æ¯”"></a>åŸºå¸¦ä¿¡å·å‘ç”Ÿå™¨ä¸Matlabæ ‡å‡†æ•°æ®å¯¹æ¯”</h4><p>å°†æ•°æ®å¯¼å‡ºåä¸matlabç”Ÿæˆçš„æ ‡å‡†å‘å°„ä¿¡å·è¿›è¡Œå¯¹æ¯”ï¼Œç”±äºéœ€è¦å¯¹æ¯”çš„æ•°æ®é‡è¾ƒå¤šï¼Œä½¿ç”¨Pythonç¼–å†™äº†è‡ªåŠ¨æ¯”è¾ƒè„šæœ¬ï¼Œå…¶è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/abs-diff-bb-vhdl-vs-matlab" alt="abs-diff-bb-vhdl-vs-matlab"></p><p>ç»“æœæ˜¾ç¤ºï¼šåŸºå¸¦ä¿¡å·å‘ç”Ÿå™¨äº§ç”Ÿçš„å‘å°„ä¿¡å·è¯¯å·®åœ¨å…è®¸èŒƒå›´å†…ï¼Œä¸”æ— é”™è¯¯ã€‚</p><h1 id="å‘å°„æœºæ¿ä¸ŠéªŒè¯"><a href="#å‘å°„æœºæ¿ä¸ŠéªŒè¯" class="headerlink" title="å‘å°„æœºæ¿ä¸ŠéªŒè¯"></a>å‘å°„æœºæ¿ä¸ŠéªŒè¯</h1><p>åœ¨é€šè¿‡äº†Modelsimä»¿çœŸéªŒè¯åï¼Œå°†HDLå·¥ç¨‹ç»¼åˆåæ·»åŠ ILAæ ¸ï¼Œæ·»åŠ ç›¸åº”çš„ä¿¡å·è§‚å¯Ÿï¼Œå¸ƒçº¿åçƒ§å½•åœ¨FPGAæ¿ä¸Šã€‚æ­¤æ—¶Testbenchå®é™…ä¸Šæ˜¯ZYNQ7å¤„ç†å™¨ä¸­è¿è¡Œçš„ç¨‹åºï¼Œæ•°æ®é€šè¿‡AXIæ€»çº¿å†™å…¥Tx80211å‘å°„æœºIPæ ¸ä¸­çš„FIFOä¸­ï¼Œå†™å…¥å®Œæ¯•åç”±ZYNQ7å‘å‡ºå‘å°„æŒ‡ä»¤ã€‚é€šè¿‡è®¾ç½®ILAæ ¸è§¦å‘ä¿¡å·ï¼Œå¯å®šå‘æ•æ‰æ‰€éœ€ä¿¡å·ï¼Œå¯¼å‡ºä¿¡å·åä¸Matlabäº§ç”Ÿçš„æ ‡å‡†ä¿¡å·è¿›è¡Œå¯¹æ¯”ã€‚åœ¨ä¸Šæ¿è°ƒè¯•ä¸­å‘ç°äº†ä¹‹å‰ä»¿çœŸè¿‡ç¨‹ä¸­æ²¡æœ‰å‘ç°çš„é—®é¢˜ï¼Œè¯¦è§ä¸‹æ–‡ã€‚</p><p>åœ¨ä¿®æ­£å®Œæ‰€æœ‰Bugåï¼Œå°†æœ€åçš„æ•°æ®å¯¼å‡ºå¹¶ä¸Matlabæ•°æ®è¿›è¡Œæ¯”è¾ƒï¼š</p><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/abs-diff-bb-ila-vs-matlab" alt="abs-diff-bb-ila-vs-matlab"></p><p>ç»“æœæ˜¾ç¤ºï¼šåŸºå¸¦ä¿¡å·å‘ç”Ÿå™¨å®é™…äº§ç”Ÿçš„å‘å°„ä¿¡å·è¯¯å·®åœ¨å…è®¸èŒƒå›´å†…ï¼Œä¸”æ— é”™è¯¯ã€‚</p><h1 id="è°ƒè¯•ä¸­é‡åˆ°çš„é—®é¢˜"><a href="#è°ƒè¯•ä¸­é‡åˆ°çš„é—®é¢˜" class="headerlink" title="è°ƒè¯•ä¸­é‡åˆ°çš„é—®é¢˜"></a>è°ƒè¯•ä¸­é‡åˆ°çš„é—®é¢˜</h1><h4 id="1-å·ç§¯ç¼–ç å™¨å¸§åŒæ­¥ç½®é›¶é—®é¢˜"><a href="#1-å·ç§¯ç¼–ç å™¨å¸§åŒæ­¥ç½®é›¶é—®é¢˜" class="headerlink" title="1.å·ç§¯ç¼–ç å™¨å¸§åŒæ­¥ç½®é›¶é—®é¢˜"></a>1.å·ç§¯ç¼–ç å™¨å¸§åŒæ­¥ç½®é›¶é—®é¢˜</h4><p><strong>é—®é¢˜ç°è±¡</strong>:<br>æ¿ä¸Šè°ƒè¯•å‘ç°åŸºå¸¦æ•°æ®ç”Ÿæˆå™¨ä¸­ï¼Œå·ç§¯ç¼–ç å™¨è¾“å‡ºçš„æœ€åˆ6ä¸ªå€¼ä¸ç†è®ºä¸ç¬¦åˆï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå…¶ä¸­çº¢è‰²ä¸ºæ­£ç¡®è¾“å‡ºã€‚</p><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/problem-conv-encoder-not-reset" alt="problem-conv-encoder-not-reset"></p><p><strong>é—®é¢˜åˆ†æ</strong><br>ç»è¿‡å¯¹æ¯”ï¼Œå‘ç°æœ‰ä¸”ä»…æœ‰æœ€åˆ6ä¸ªæ•°æ®ä¸ç†è®ºä¸ç¬¦åˆï¼Œä¸”ç¨³å®šå¤ç°ã€‚è€ƒè™‘åˆ°å·ç§¯ç¼–ç ç§»ä½å¯„å­˜å™¨æ·±åº¦æ°å¥½ç­‰äº6ï¼Œé€†æ¨å¾—åˆ°å¼€å§‹å·ç§¯å‰ç§»ä½å¯„å­˜å™¨çš„å€¼åº”ä¸º010110ï¼Œæ°å¥½ä¸ºä¸Šä¸€æ¬¡åŸºå¸¦ä¿¡å·çš„æœ€å6ä½ã€‚äºæ˜¯å¾—å‡ºç»“è®ºï¼šå·ç§¯ç¼–ç å™¨åœ¨å¤„ç†å®Œä¸€å¸§æ•°æ®åæ²¡æœ‰é‡ç½®ï¼Œå¯¼è‡´äº†é—®é¢˜ã€‚<br><strong>é—®é¢˜è§£å†³</strong><br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/code-conv-encoder-fix-1" alt="code-conv-encoder-fix-1"><br>å°†å·ç§¯ç¼–ç å™¨çš„é‡ç½®ä¸å¸§å¼€å§‹ä¿¡å·åŒæ­¥ï¼Œä¿è¯åœ¨å¤„ç†æ¯ä¸€å¸§æ•°æ®å‰å·ç§¯ç¼–ç å™¨å‡å¤„äºå…¨0çŠ¶æ€ã€‚</p><h4 id="2-æ•°æ®åŸŸTailæ— éœ€æ‰°ç éœ€è¦ç½®é›¶çš„é—®é¢˜"><a href="#2-æ•°æ®åŸŸTailæ— éœ€æ‰°ç éœ€è¦ç½®é›¶çš„é—®é¢˜" class="headerlink" title="2.æ•°æ®åŸŸTailæ— éœ€æ‰°ç éœ€è¦ç½®é›¶çš„é—®é¢˜"></a>2.æ•°æ®åŸŸTailæ— éœ€æ‰°ç éœ€è¦ç½®é›¶çš„é—®é¢˜</h4><p><strong>é—®é¢˜ç°è±¡</strong><br>æ¿ä¸Šè°ƒè¯•å‘ç°ï¼Œè¾“å‡ºçš„åŸºå¸¦æ•°æ®æœ€åä¸€ä¸ªSymbolé”™è¯¯ï¼Œè€Œä¹‹å‰çš„æ‰€æœ‰symbolå®Œå…¨æ­£ç¡®ã€‚<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/problem-tail-not-zeroed" alt="problem-tail-not-zeroed"><br><strong>é—®é¢˜åˆ†æ</strong><br>ä»”ç»†æŸ¥çœ‹802.11åè®®ï¼Œåœ¨é™„å½•G.1å‘ç°å¦‚ä¸‹æè¿°ï¼š<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/zeroing-tail-bits-desc" alt="zeroing-tail-bits-desc"><br>æŒ‰ç…§åè®®ï¼Œåœ¨æ•°æ®åŸŸæœ€å6bitçš„Tailæ— éœ€è¿›è¡Œæ‰°ç ï¼Œéœ€è¦ç½®é›¶ã€‚è€Œåœ¨åŸºå¸¦ä¿¡å·ç”Ÿæˆå™¨ä¸­æ²¡æœ‰è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œå¯¼è‡´æœ€åä¸€ä¸ªSymbolå‘ç”Ÿé”™è¯¯ã€‚<br><strong>é—®é¢˜è§£å†³</strong><br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/tail-not-zeroed-fix-1" alt="tail-not-zeroed-fix-1"><br>åœ¨æ‰°ç å™¨æ¨¡å—ä¸­æ·»åŠ è®¡æ•°å™¨ï¼ŒåŒæ—¶å°†è®¡æ•°å™¨ä¸SIGNAL Fieldçš„LENGTHè¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œå°†ç›¸åº”çš„Tail bitsç½®é›¶ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åˆ†æ¨¡å—è®¾è®¡å®Œæˆåï¼Œéœ€è¦è¿›è¡Œç»„è£…å’Œè°ƒè¯•ã€‚æŒ‰ç…§æ¡†å›¾å°†æ¨¡å—çº§è”ï¼Œæ¥ä¸‹æ¥å¯¹æ¨¡å—çš„æ—¶åºã€æ•°æ®å®Œæ•´æ€§å’Œæ•°æ®æ­£ç¡®æ€§åœ¨ä»¿çœŸå±‚é¢ä¸Šè¿›è¡ŒéªŒè¯ã€‚ä»¿çœŸéªŒè¯é€šè¿‡åï¼Œå°†æ‰€æœ‰çš„æ¨¡å—æ‰“åŒ…æˆTx80211è‡ªå®šä¹‰IPæ ¸ï¼ŒåŠ å…¥AD9361çš„IPæ ¸Block Designï¼Œè¿›è¡Œæ¥ä¸‹æ¥çš„æ¿ä¸ŠéªŒè¯ã€‚&lt;br&gt;&lt;img 
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 10.ZYNQ7ç¼–ç¨‹æ§åˆ¶åŸºå¸¦ä¿¡å·å‘ç”Ÿå™¨</title>
    <link href="http://pa.radonyl.xyz/2019/11/10/802-11g-Transmitter-10-app-programming/"/>
    <id>http://pa.radonyl.xyz/2019/11/10/802-11g-Transmitter-10-app-programming/</id>
    <published>2019-11-10T09:14:30.000Z</published>
    <updated>2019-12-01T12:22:26.310Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 9.AD9361 IPæ ¸</title>
    <link href="http://pa.radonyl.xyz/2019/11/09/802-11g-Transmitter-9-ad9361-hdl/"/>
    <id>http://pa.radonyl.xyz/2019/11/09/802-11g-Transmitter-9-ad9361-hdl/</id>
    <published>2019-11-09T09:13:57.000Z</published>
    <updated>2019-12-01T12:21:32.823Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡802.11g Transmitter|Scrambler</title>
    <link href="http://pa.radonyl.xyz/2019/11/09/Scrambler-f/"/>
    <id>http://pa.radonyl.xyz/2019/11/09/Scrambler-f/</id>
    <published>2019-11-09T01:33:09.000Z</published>
    <updated>2019-11-30T15:29:04.507Z</updated>
    
    <content type="html"><![CDATA[<font face="å¾®è½¯é›…é»‘" size=4>**ğŸ“æ‰°ç å™¨ç®€ä»‹**</font><a id="more"></a><table><tr><td bgcolor=#F0F8FF>&#8195;&#8195;æ•°å­—é€šä¿¡ä¸­ï¼Œå¦‚æœç»å¸¸å‡ºç°é•¿çš„0æˆ–1åºåˆ—ï¼Œå°†ä¼šå½±å“ä½åŒæ­¥çš„å»ºç«‹å’Œä¿æŒã€‚åœ¨å‘å°„æœºä¸­ä½¿ç”¨æ‰°ç ï¼Œå¯ä»¥<font color=red>é¿å…è¿™ç§æ•°æ®å¯¹æ¥æ”¶æœºå®šæ—¶çš„ä¸åˆ©å½±å“</font>ã€‚åŒæ—¶ï¼Œä¸ºäº†é™åˆ¶ç”µè·¯ä¸­å­˜åœ¨çš„ä¸åŒç¨‹åº¦çš„éçº¿æ€§ç‰¹æ€§å¯¹å…¶ä»–ç”µè·¯é€šä¿¡é€ æˆçš„ä¸²æ‰°ï¼Œ<font color=red>è¦æ±‚æ•°å­—ä¿¡å·çš„æœ€å°å‘¨æœŸè¶³å¤Ÿé•¿</font>ã€‚å°†æ•°å­—ä¿¡å·å˜æ¢æˆ<font color=red>å…·æœ‰è¿‘ä¼¼äºç™½å™ªå£°ç»Ÿè®¡ç‰¹æ€§çš„æ•°å­—åºåˆ—</font>å³å¯æ»¡è¶³è¦æ±‚ï¼Œè¿™é€šå¸¸ç”¨åŠ æ‰°æ¥å®ç°ã€‚</td></tr></table><font face="é»‘ä½“å¾®è½¯é›…é»‘" size=4>**ğŸˆåŸç†**</font><blockquote><p>&#8195;&#8195;æ‰€è°“åŠ æ‰°ï¼Œå°±æ˜¯<strong>ä¸ç”¨å¢åŠ å†—ä½™è€Œæ‰°ä¹±ä¿¡å·</strong>ï¼Œæ”¹å˜æ•°å­—ä¿¡å·ç»Ÿè®¡ç‰¹æ€§ï¼Œä½¿å…¶å…·æœ‰è¿‘ä¼¼ç™½å™ªå£°ç»Ÿè®¡ç‰¹æ€§çš„ä¸€ç§æŠ€æœ¯ã€‚åœ¨OFDMä¸­ï¼ŒDATAåŸŸæ•°æ®çš„å¤„ç†ï¼Œé¦–å…ˆéœ€è¦è¿›è¡ŒåŠ æ‰°æ“ä½œã€‚æ•´ä¸ªDATAåŸŸæ•°æ®ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º127çš„å¸§åŒæ­¥æ‰°ç å™¨åŠ æ‰°ã€‚8ä½PSDUæ•°æ®å¸§è½¬æ¢æˆ<strong>ä¸²è¡Œæ¯”ç‰¹æµ</strong>ï¼Œå…¶ä¸­ï¼ŒLSBåœ¨å‰ï¼ŒMSBåœ¨æœ€åã€‚æ‰°ç å™¨ä½¿ç”¨ä¸‹åˆ—ç”Ÿæˆå¤šé¡¹å¼:<script type="math/tex">\mathbf{S(x) = x^7 + x^4 + 1}</script>ä¹Ÿå°±æ˜¯å°†æ•°æ®æ•°æ®é€å…¥è¯¥å¤šé¡¹å¼ï¼Œç„¶åè¾“å‡ºã€‚è¾“å‡ºåçš„ç»“æœå°±æ˜¯æ‰°ç ä¹‹åçš„ç»“æœã€‚è¯¥æ‰°ç å™¨çš„æœ€é«˜å¹‚æ˜¯7ï¼Œé¦–å…ˆè¦å®šä¹‰ä¸€ä¸ª7ä½éé›¶çš„ä¼ªéšæœºå¤„ç½®çŠ¶æ€ï¼Œæ¯”å¦‚è¯´æ˜¯ 1011101ã€‚ç»è¿‡ä¸Šé¢çš„å¤šé¡¹å¼ä¹‹åï¼Œç”Ÿæˆä¸€ä¸ª127ä½çš„éšæœºæ•°ã€‚</p></blockquote><p><font face="é»‘ä½“å¾®è½¯é›…é»‘" size=4><strong>ğŸˆå®ç°</strong></font><br>&#8195;&#8195;æ‰°ç å™¨å¯ä»¥ç”¨ä¸€ä¸ª7ä½ç§»ä½å¯„å­˜å™¨SCRAMBLERå®ç°ã€‚æ‰°ç æ¨¡å—çš„æ¨¡å—æ¡†å›¾å’Œç«¯å£å®šä¹‰å¦‚ä¸‹ï¼š<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/fimg/Picture1.png" alt="Picture1.png"></p><div class="table-container"><table><thead><tr><th style="text-align:center">ç«¯å£å</th><th style="text-align:center">ä½å®½</th><th style="text-align:center">è¾“å…¥/è¾“å‡º</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">SCRAM_DIN</td><td style="text-align:center">1</td><td style="text-align:center">Input</td><td style="text-align:center">æ‰°ç å™¨è¾“å…¥ä¿¡å·</td></tr><tr><td style="text-align:center">SCRAM_ND</td><td style="text-align:center">1</td><td style="text-align:center">Input</td><td style="text-align:center">æ‰°ç å™¨è¾“å…¥æœ‰æ•ˆï¼Œä¸è¾“å…¥ä¿¡å·åŒæ­¥æ‹‰é«˜</td></tr><tr><td style="text-align:center">SCRAM_LOAD</td><td style="text-align:center">1</td><td style="text-align:center">Input</td><td style="text-align:center">æ‰°ç å™¨åˆå§‹è®¾ç½®ä¿¡å·</td></tr><tr><td style="text-align:center">SCRAM_RST</td><td style="text-align:center">1</td><td style="text-align:center">Input</td><td style="text-align:center">å¤ä½ä¿¡å·ï¼Œä½ç”µå¹³æœ‰æ•ˆ</td></tr><tr><td style="text-align:center">SCRAM_CLK</td><td style="text-align:center">1</td><td style="text-align:center">Input</td><td style="text-align:center">æ—¶é’Ÿä¿¡å·(60MHz)</td></tr><tr><td style="text-align:center">SCRAM_SEED</td><td style="text-align:center">7</td><td style="text-align:center">Input</td><td style="text-align:center">æ‰°ç å™¨åˆå§‹çŠ¶æ€å€¼ï¼Œæ­¤å¤„ä¸º7â€™b1011101</td></tr><tr><td style="text-align:center">SCRAM_DOUT</td><td style="text-align:center">1</td><td style="text-align:center">Output</td><td style="text-align:center">æ‰°ç å™¨è¾“å‡ºä¿¡å·</td></tr><tr><td style="text-align:center">SCRAM_RDY</td><td style="text-align:center">1</td><td style="text-align:center">Output</td><td style="text-align:center">æ‰°ç å™¨è¾“å‡ºæœ‰æ•ˆï¼Œä¸è¾“å‡ºä¿¡å·åŒæ­¥æ‹‰é«˜</td></tr></tbody></table></div><p><font face="é»‘ä½“å¾®è½¯é›…é»‘" size=4><strong>ğŸˆä»£ç </strong></font><br>&#8195;&#8195;å½“æ‰°ç å™¨åˆå§‹è®¾ç½®ä¿¡å·SCRAM_LOADä¸ºé«˜ç”µå¹³æ—¶ï¼Œæ‰°ç å™¨è¢«è®¾ç½®æˆä¸€ä¸ªéé›¶çš„ä¼ªéšæœºçŠ¶æ€ã€‚æ­¤å¤„å–éé›¶ä¼ªéšæœºçŠ¶æ€ä¸ºSCRAM_SEED=1011101<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SCRAM_SEED = <span class="number">7</span><span class="string">'b1011101;</span></span><br><span class="line"><span class="string">if(SCRAM_LOAD)</span></span><br><span class="line"><span class="string">    SCRAMBLER &lt;= SCRAM_SEED;</span></span><br></pre></td></tr></table></figure><br>&#8195;&#8195;å½“æ‰°ç å™¨è¾“å…¥æœ‰æ•ˆä¿¡å·SCRAM_NDä¸ºé«˜ç”µå¹³æ—¶ï¼Œæ¯ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰°ç å™¨çŠ¶æ€å·¦ç§»ä¸€ä½ï¼Œå¹¶ä¸”ç¬¬7ä½å’Œç¬¬4ä½è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼Œæ‰€å¾—çš„å€¼ä¸€æ–¹é¢ä½œä¸ºå¯„å­˜å™¨çš„è¾“å…¥ï¼Œå¦ä¸€æ–¹é¢å’Œè¾“å…¥çš„ä¸²è¡Œæ¯”ç‰¹æµè¿›è¡Œå¼‚æˆ–è¿ç®—å¾—åˆ°åŠ æ‰°åçš„è¾“å‡ºæ•°æ®SCRAM_DOUTã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(SCRAM_ND)</span><br><span class="line">    begin</span><br><span class="line">        SCRAM_DOUT &lt;= SCRAM_DIN + data_temp[<span class="number">7</span>] + SCRAMBLER[<span class="number">4</span>];</span><br><span class="line">        SCRAMBLER &lt;= &#123;SCRAMBLER[<span class="number">6</span>:<span class="number">1</span>],data_temp[<span class="number">7</span>] + SCRAMBLER[<span class="number">4</span>]&#125;;</span><br><span class="line">    end</span><br></pre></td></tr></table></figure></p><p><font face="é»‘ä½“å¾®è½¯é›…é»‘" size=4><strong>ğŸˆä»¿çœŸç»“æœ</strong></font><br>&#8195;&#8195;å¯¹å·¥ç¨‹æ–‡ä»¶è¿›è¡Œç»¼åˆã€å¸ƒå±€ã€å¸ƒçº¿åä»¿çœŸï¼Œå¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä»¿çœŸç»“æœ:<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/fimg/Picture2.png" alt="Picture2.png"><br>&#8195;&#8195;ä¸Šå›¾ä¸­ï¼Œdinæ˜¯è¾“å…¥æ‰°ç å™¨çš„ä¸¤ä¸ªSymbolï¼Œæ¯ä¸ªSymbolä¸º144ä¸ªbit;doutä¸ºæ‰°ç å¤„ç†åçš„è¾“å‡ºï¼ŒåŒæ ·è¾“å‡ºä¸¤ä¸ªSymbolçš„æ•°æ®ï¼Œæ¯ä¸ªSymbolæœ‰144ä¸ªbitå·²æ‰°ç æ•°æ®ã€‚</p><blockquote><p>&#8195;&#8195;å°†ä»¿çœŸé€šè¿‡çš„å·¥ç¨‹æ–‡ä»¶ä½¿ç”¨ChipScopeæ·»åŠ è§‚å¯Ÿä¿¡å·é‡‡æ ·æ—¶é’Ÿã€è§¦å‘ä¿¡å·å’Œå¾…è§‚å¯Ÿä¿¡å·åé‡æ–°ç»¼åˆã€å¸ƒå±€å¸ƒçº¿ç”Ÿæˆbitæ–‡ä»¶ï¼Œä¸‹è½½åˆ°ç›®æ ‡æ¿åç”¨ChipScopeè¿›è¡Œåœ¨çº¿æµ‹è¯•ï¼Œå¾—åˆ°è§‚æµ‹ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä¸‹å›¾ä¸­çš„DINå¯¹åº”ä¸Šå›¾ä¸­çš„dinï¼Œä¸‹å›¾ä¸­çš„DOUTå¯¹åº”ä¸Šå›¾ä¸­çš„doutã€‚ä¸‹å›¾çš„åœ¨çº¿æµ‹è¯•ç»“æœä¸ä¸Šå›¾çš„åä»¿çœŸç»“æœå»åˆï¼ŒéªŒè¯äº†è®¾è®¡çš„æ­£ç¡®æ€§ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/fimg/Picture3.png" alt="Picture3.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;font face=&quot;å¾®è½¯é›…é»‘&quot; size=4&gt;**ğŸ“æ‰°ç å™¨ç®€ä»‹**&lt;/font&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 8.åŸºå¸¦ä¿¡å·å‘ç”Ÿæ§åˆ¶å™¨</title>
    <link href="http://pa.radonyl.xyz/2019/11/08/802-11g-Transmitter-8-controller/"/>
    <id>http://pa.radonyl.xyz/2019/11/08/802-11g-Transmitter-8-controller/</id>
    <published>2019-11-08T09:58:34.000Z</published>
    <updated>2019-12-01T12:21:04.538Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Controller-Port-defination"><a href="#Controller-Port-defination" class="headerlink" title="Controller Port defination"></a>Controller Port defination</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> tx_controller(</span><br><span class="line">    <span class="keyword">input</span> global_rst_n,</span><br><span class="line">    <span class="keyword">input</span> clk_sys,</span><br><span class="line">    <span class="comment">// Control</span></span><br><span class="line">    <span class="keyword">input</span> start_tx,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> busy,</span><br><span class="line">    <span class="comment">// Clock Gen</span></span><br><span class="line">    <span class="keyword">input</span> main_clk_locked,</span><br><span class="line">    <span class="keyword">input</span> clocks_locked,</span><br><span class="line">    <span class="comment">// Resets</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> reset_clocks,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> reset_phy,</span><br><span class="line">    <span class="comment">// Scrambler</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">1</span>] scrambler_seed,</span><br><span class="line">    <span class="comment">// Config AXI IO</span></span><br><span class="line">    <span class="keyword">input</span> [<span class="number">31</span>:<span class="number">0</span>] s_config_tdata,</span><br><span class="line">    <span class="keyword">input</span> s_config_tvalid,</span><br><span class="line">    <span class="comment">// Tx Control</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> load_signal_field,</span><br><span class="line">    <span class="keyword">input</span> send_data_field,</span><br><span class="line">    <span class="keyword">input</span> different_rate,</span><br><span class="line">    <span class="comment">// Frame Control</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> start_frame,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> start_ts,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> start_sig,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> start_data,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> end_frame</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><h4 id="FSM"><a href="#FSM" class="headerlink" title="FSM"></a>FSM</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">    next_state = state;</span><br><span class="line">    <span class="keyword">case</span> (state)</span><br><span class="line">        <span class="comment">// INIT Phase: reset hardware, wait loading config</span></span><br><span class="line">        INIT0 : next_state = INIT1;</span><br><span class="line">        INIT1 : next_state = INIT2;</span><br><span class="line">        INIT2 : next_state = INIT3;</span><br><span class="line">        INIT3 : <span class="keyword">if</span> (s_config_tvalid) next_state = LOAD_SIG;</span><br><span class="line">                <span class="keyword">else</span> next_state = INIT3;</span><br><span class="line">        LOAD_SIG : next_state = SET_CLK;</span><br><span class="line">        SET_CLK : next_state = WAIT_CLK;</span><br><span class="line">        WAIT_CLK : <span class="keyword">if</span> (clocks_locked) next_state = PHY_RDY;</span><br><span class="line">                    <span class="keyword">else</span> next_state = WAIT_CLK;</span><br><span class="line">        <span class="comment">// TX Phase: wait tx command, then send payload</span></span><br><span class="line">        PHY_RDY : <span class="keyword">if</span> (start_tx) next_state = TX_HEADER;</span><br><span class="line">                    <span class="keyword">else</span> next_state = PHY_RDY;</span><br><span class="line">        TX_HEADER : <span class="keyword">if</span> (tx_header_counter &gt;= <span class="number">330</span>) next_state = TX_DATA;</span><br><span class="line">                    <span class="keyword">else</span> next_state = TX_HEADER;</span><br><span class="line">        TX_DATA: <span class="keyword">if</span> (!send_data_field) next_state = TX_END;</span><br><span class="line">                    <span class="keyword">else</span> next_state = TX_DATA;</span><br><span class="line">        TX_END : next_state = INIT3;</span><br><span class="line">        <span class="keyword">default</span>: next_state = INIT0;</span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">// output logic</span></span><br><span class="line"><span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">    <span class="comment">// reset_phy (active_low)</span></span><br><span class="line">    <span class="keyword">case</span> (state)</span><br><span class="line">        INIT0, INIT1, INIT2: reset_phy = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">default</span>: reset_phy = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line">    <span class="comment">// load_signal_field</span></span><br><span class="line">    <span class="keyword">case</span> (state)</span><br><span class="line">        LOAD_SIG: load_signal_field = <span class="number">1</span>; </span><br><span class="line">        <span class="keyword">default</span>: load_signal_field = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line">    <span class="comment">// reset_clocks (active_high)</span></span><br><span class="line">    <span class="keyword">case</span> (state)</span><br><span class="line">        SET_CLK: reset_clocks = (different_rate == <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">default</span>: reset_clocks = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line">    <span class="comment">// tx_header</span></span><br><span class="line">    <span class="keyword">case</span> (state)</span><br><span class="line">        TX_HEADER: tx_header = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">default</span>:   tx_header = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line">    <span class="comment">// end_frame</span></span><br><span class="line">    <span class="keyword">case</span> (state)</span><br><span class="line">        TX_END:  end_frame = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">default</span>: end_frame = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line">    <span class="comment">// busy</span></span><br><span class="line">    <span class="keyword">case</span> (state)</span><br><span class="line">        PHY_RDY: busy = <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">default</span>: busy = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="Timing-Counters"><a href="#Timing-Counters" class="headerlink" title="Timing Counters"></a>Timing Counters</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Transmitt Timing</span></span><br><span class="line"><span class="comment">// to clk_sys 20m</span></span><br><span class="line"><span class="keyword">parameter</span> START_TS_OFFSET = <span class="number">32</span>;</span><br><span class="line"><span class="keyword">parameter</span> START_TS_DURATION = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// to clk_cb_10m 10m</span></span><br><span class="line"><span class="keyword">parameter</span> START_SIG_OFFSET = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">parameter</span> START_SIG_DURATION = <span class="number">2</span>;</span><br><span class="line"><span class="comment">// to clk_cb 10m~90m</span></span><br><span class="line"><span class="keyword">parameter</span> START_DATA_OFFSET = <span class="number">77</span>;</span><br><span class="line"><span class="keyword">parameter</span> START_DATA_DURATION = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">    <span class="comment">// start frame</span></span><br><span class="line">    <span class="keyword">if</span> (tx_header_counter &lt; <span class="number">4</span> &amp;&amp; tx_header) start_frame = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> start_frame = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// traininig sequence</span></span><br><span class="line">    <span class="keyword">if</span> (tx_header_counter &gt;= START_TS_OFFSET &amp;&amp;</span><br><span class="line">        tx_header_counter &lt; START_TS_OFFSET + START_TS_DURATION) start_ts = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> start_ts = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// signal field</span></span><br><span class="line">    <span class="keyword">if</span> (tx_header_counter &gt;= START_SIG_OFFSET &amp;&amp;</span><br><span class="line">        tx_header_counter &lt; START_SIG_OFFSET + START_SIG_DURATION) start_sig = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> start_sig = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// data field</span></span><br><span class="line">    <span class="keyword">if</span> (tx_header_counter &gt;= START_DATA_OFFSET &amp;&amp;</span><br><span class="line">        tx_header_counter &lt; START_DATA_OFFSET + START_DATA_DURATION) start_data = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> start_data = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// header counter</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk_sys <span class="keyword">or</span> <span class="keyword">negedge</span> global_rst_n) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (!global_rst_n) <span class="keyword">begin</span></span><br><span class="line">        tx_header_counter &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (tx_header) <span class="keyword">begin</span></span><br><span class="line">            tx_header_counter &lt;= tx_header_counter + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> tx_header_counter &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="Controller-Simulation"><a href="#Controller-Simulation" class="headerlink" title="Controller Simulation"></a>Controller Simulation</h4><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/tx-controller-modelsim-1" alt="tx-controller-modelsim-1"><br>å‘å°„æœºå°±æ˜¯çŠ¶æ€æœº+æŒ‰æ—¶åºäº§ç”Ÿä¿¡å·</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;Controller-Port-defination&quot;&gt;&lt;a href=&quot;#Controller-Port-defination&quot; class=&quot;headerlink&quot; title=&quot;Controller Port defination&quot;&gt;&lt;/a&gt;Controll
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 7.åŠ çª—</title>
    <link href="http://pa.radonyl.xyz/2019/11/07/802-11g-Transmitter-7-windowing/"/>
    <id>http://pa.radonyl.xyz/2019/11/07/802-11g-Transmitter-7-windowing/</id>
    <published>2019-11-07T09:12:13.000Z</published>
    <updated>2019-12-01T12:20:12.463Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Windowing-Port-defination"><a href="#Windowing-Port-defination" class="headerlink" title="Windowing Port defination"></a>Windowing Port defination</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> windowing_combiner(</span><br><span class="line">    <span class="keyword">input</span> rst_n,</span><br><span class="line">    <span class="keyword">input</span> clk_sys,</span><br><span class="line">    <span class="keyword">input</span> start_frame,</span><br><span class="line">    <span class="keyword">input</span> end_frame,</span><br><span class="line">    <span class="comment">// Training Seq Input</span></span><br><span class="line">    <span class="keyword">input</span> <span class="keyword">signed</span> [<span class="number">7</span>:<span class="number">0</span>] ts_re,</span><br><span class="line">    <span class="keyword">input</span> <span class="keyword">signed</span> [<span class="number">7</span>:<span class="number">0</span>] ts_im,</span><br><span class="line">    <span class="keyword">input</span> ts_en,</span><br><span class="line">    <span class="keyword">input</span> ts_last,</span><br><span class="line">    <span class="comment">// IFFT Input</span></span><br><span class="line">    <span class="keyword">input</span> <span class="keyword">signed</span> [<span class="number">7</span>:<span class="number">0</span>] ifft_re,</span><br><span class="line">    <span class="keyword">input</span> <span class="keyword">signed</span> [<span class="number">7</span>:<span class="number">0</span>] ifft_im,</span><br><span class="line">    <span class="keyword">input</span> ifft_en,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">5</span>:<span class="number">0</span>] ifft_index,</span><br><span class="line">    <span class="comment">// Tx Output</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> <span class="keyword">signed</span> [<span class="number">7</span>:<span class="number">0</span>] tx_re,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> <span class="keyword">signed</span> [<span class="number">7</span>:<span class="number">0</span>] tx_im,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> tx_valid</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><h4 id="Windowing"><a href="#Windowing" class="headerlink" title="Windowing"></a>Windowing</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*) <span class="keyword">begin</span></span><br><span class="line">    save_first_val = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">case</span> (state)</span><br><span class="line">        IDLE : <span class="keyword">begin</span></span><br><span class="line">            mux_out_re = <span class="number">0</span>;</span><br><span class="line">            mux_out_im = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        MUX_TS : <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span> (ts_last) <span class="keyword">begin</span></span><br><span class="line">                mux_out_re = ts_re + (ifft_re &gt;&gt;&gt; <span class="number">1</span>);</span><br><span class="line">                mux_out_im = ts_im + (ifft_im &gt;&gt;&gt; <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                mux_out_re = ts_re;</span><br><span class="line">                mux_out_im = ts_im;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        MUX_IFFT : <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span> (last_ifft_index == <span class="number">63</span> &amp;&amp; ifft_index == <span class="number">0</span>) <span class="keyword">begin</span></span><br><span class="line">                save_first_val = <span class="number">1</span>;</span><br><span class="line">                mux_out_re = ifft_re;</span><br><span class="line">                mux_out_im = ifft_im;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (last_ifft_index == <span class="number">63</span> &amp;&amp; ifft_index == <span class="number">48</span>) <span class="keyword">begin</span></span><br><span class="line">                mux_out_re = (ifft_re &gt;&gt;&gt; <span class="number">1</span>) + first_ifft_re;</span><br><span class="line">                mux_out_im = (ifft_im &gt;&gt;&gt; <span class="number">1</span>) + first_ifft_im;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                mux_out_re = ifft_re;</span><br><span class="line">                mux_out_im = ifft_im;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">default</span>: <span class="keyword">begin</span></span><br><span class="line">            mux_out_re = <span class="number">0</span>;</span><br><span class="line">            mux_out_im = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">// Save Value</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk_sys <span class="keyword">or</span> <span class="keyword">negedge</span> rst_n) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (!rst_n) <span class="keyword">begin</span></span><br><span class="line">        first_ifft_re &lt;= <span class="number">0</span>;</span><br><span class="line">        first_ifft_im &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (save_first_val) <span class="keyword">begin</span></span><br><span class="line">            first_ifft_re &lt;= mux_out_re &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            first_ifft_im &lt;= mux_out_im &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">// Output</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk_sys <span class="keyword">or</span> <span class="keyword">negedge</span> rst_n) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (!rst_n) <span class="keyword">begin</span></span><br><span class="line">        tx_re &lt;= <span class="number">0</span>;</span><br><span class="line">        tx_im &lt;= <span class="number">0</span>;</span><br><span class="line">        tx_valid &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        tx_re &lt;= mux_out_re;</span><br><span class="line">        tx_im &lt;= mux_out_im;</span><br><span class="line">        tx_valid &lt;= ifft_en | ts_en;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="Windowing-Simulation"><a href="#Windowing-Simulation" class="headerlink" title="Windowing Simulation"></a>Windowing Simulation</h4><p>ä¸ç”¨ç¬¬ä¸€å¼ <br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/window-combiner-modelsim-1" alt="window-combiner-modelsim-1"></p><p>ç¬¬äºŒå¼ :<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/window-combiner-modelsim-2" alt="window-combiner-modelsim-2"><br>å¯è§åŠ çª—æ¨¡å—å°†è®­ç»ƒåºåˆ—ä¸åç»­OFDMç¬¦å·åºåˆ—åˆå¹¶åœ¨ä¸€èµ·,ä¸”æ¯ä¸ªSymbolå‡å‚¨å­˜ç¬¬ä¸€ä¸ªå€¼,ç”¨äºåŠ çª—(æŠŠå·¦è¾¹è£ä¸€ä¸‹)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;Windowing-Port-defination&quot;&gt;&lt;a href=&quot;#Windowing-Port-defination&quot; class=&quot;headerlink&quot; title=&quot;Windowing Port defination&quot;&gt;&lt;/a&gt;Windowing P
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 6.IFFT</title>
    <link href="http://pa.radonyl.xyz/2019/11/06/802-11g-Transmitter-6-ifft/"/>
    <id>http://pa.radonyl.xyz/2019/11/06/802-11g-Transmitter-6-ifft/</id>
    <published>2019-11-06T09:12:03.000Z</published>
    <updated>2019-12-01T12:20:25.263Z</updated>
    
    <content type="html"><![CDATA[<h4 id="IFFF-Port-defination"><a href="#IFFF-Port-defination" class="headerlink" title="IFFF Port defination"></a>IFFF Port defination</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> stream_ifft(</span><br><span class="line">    <span class="keyword">input</span> rst_n,</span><br><span class="line">    <span class="keyword">input</span> clk_din,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">7</span>:<span class="number">0</span>] din_re,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">7</span>:<span class="number">0</span>] din_im,</span><br><span class="line">    <span class="keyword">input</span> din_valid,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">7</span>:<span class="number">0</span>] dout_re,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">7</span>:<span class="number">0</span>] dout_im,</span><br><span class="line">    <span class="keyword">output</span> [<span class="number">5</span>:<span class="number">0</span>] dout_index,</span><br><span class="line">    <span class="keyword">output</span> dout_valid</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><h4 id="IFFT-IP-core-and-its-configuration"><a href="#IFFT-IP-core-and-its-configuration" class="headerlink" title="IFFT IP core and its configuration"></a>IFFT IP core and its configuration</h4><p>å¯¹IPæ ¸è¿›è¡ŒåŸºæœ¬çš„é…ç½®ï¼ŒåŒ…æ‹¬ç¼©æ”¾ç³»æ•°ã€è½¬æ¢æ–¹å‘å’Œå¾ªç¯å‰ç¼€é•¿åº¦<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FFT core</span></span><br><span class="line">xfft_0 IFFT (</span><br><span class="line">    <span class="variable">.aclk</span>(clk_din),                                                <span class="comment">// input wire aclk</span></span><br><span class="line">    <span class="variable">.aresetn</span>(rst_n),                                          <span class="comment">// input wire aresetn</span></span><br><span class="line">    </span><br><span class="line">    <span class="variable">.s_axis_config_tdata</span>(s_axis_config_tdata),                  <span class="comment">// input wire [15 : 0] s_axis_config_tdata</span></span><br><span class="line">    <span class="variable">.s_axis_config_tvalid</span>(s_axis_config_tvalid),                <span class="comment">// input wire s_axis_config_tvalid</span></span><br><span class="line">    <span class="variable">.s_axis_config_tready</span>(s_axis_config_tready),                <span class="comment">// output wire s_axis_config_tready</span></span><br><span class="line">    </span><br><span class="line">    <span class="variable">.s_axis_data_tdata</span>(s_axis_data_tdata),                      <span class="comment">// input wire [31 : 0] s_axis_data_tdata</span></span><br><span class="line">    <span class="variable">.s_axis_data_tvalid</span>(s_axis_data_tvalid),                    <span class="comment">// input wire s_axis_data_tvalid</span></span><br><span class="line">    <span class="variable">.s_axis_data_tready</span>(s_axis_data_tready),                    <span class="comment">// output wire s_axis_data_tready</span></span><br><span class="line">    <span class="variable">.s_axis_data_tlast</span>(s_axis_data_tlast),                      <span class="comment">// input wire s_axis_data_tlast</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Transform result</span></span><br><span class="line">    <span class="variable">.m_axis_data_tdata</span>(m_axis_data_tdata),                      <span class="comment">// output wire [31 : 0] m_axis_data_tdata</span></span><br><span class="line">    <span class="comment">// Index output</span></span><br><span class="line">    <span class="variable">.m_axis_data_tuser</span>(m_axis_data_tuser),                      <span class="comment">// output wire [15 : 0] m_axis_data_tuser</span></span><br><span class="line">    <span class="variable">.m_axis_data_tvalid</span>(m_axis_data_tvalid),                    <span class="comment">// output wire m_axis_data_tvalid</span></span><br><span class="line">    <span class="variable">.m_axis_data_tready</span>(m_axis_data_tready),                    <span class="comment">// input wire m_axis_data_tready</span></span><br><span class="line">    <span class="variable">.m_axis_data_tlast</span>(m_axis_data_tlast),                      <span class="comment">// output wire m_axis_data_tlast</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Overflow AXI (not used)</span></span><br><span class="line">    <span class="variable">.m_axis_status_tdata</span>(m_axis_status_tdata),                  <span class="comment">// output wire [7 : 0] m_axis_status_tdata</span></span><br><span class="line">    <span class="variable">.m_axis_status_tvalid</span>(m_axis_status_tvalid),                <span class="comment">// output wire m_axis_status_tvalid</span></span><br><span class="line">    <span class="variable">.m_axis_status_tready</span>(m_axis_status_tready),                <span class="comment">// input wire m_axis_status_tready</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Events</span></span><br><span class="line">    <span class="variable">.event_frame_started</span>(event_frame_started),                  <span class="comment">// output wire event_frame_started</span></span><br><span class="line">    <span class="variable">.event_tlast_unexpected</span>(event_tlast_unexpected),            <span class="comment">// output wire event_tlast_unexpected</span></span><br><span class="line">    <span class="variable">.event_tlast_missing</span>(event_tlast_missing),                  <span class="comment">// output wire event_tlast_missing</span></span><br><span class="line">    <span class="variable">.event_fft_overflow</span>(event_fft_overflow),                    <span class="comment">// output wire event_fft_overflow</span></span><br><span class="line">    <span class="variable">.event_status_channel_halt</span>(event_status_channel_halt),      <span class="comment">// output wire event_status_channel_halt</span></span><br><span class="line">    <span class="variable">.event_data_in_channel_halt</span>(event_data_in_channel_halt),    <span class="comment">// output wire event_data_in_channel_halt</span></span><br><span class="line">    <span class="variable">.event_data_out_channel_halt</span>(event_data_out_channel_halt)  <span class="comment">// output wire event_data_out_channel_halt</span></span><br><span class="line">    );</span><br><span class="line"><span class="comment">// configuration</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk_din <span class="keyword">or</span> <span class="keyword">negedge</span> rst_n) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (!rst_n) <span class="keyword">begin</span></span><br><span class="line">        s_axis_config_tvalid &lt;= <span class="number">0</span>;</span><br><span class="line">        s_axis_config_tdata &lt;= &#123;<span class="number">1'b0</span>, <span class="number">6'b101110</span>, <span class="number">1'b0</span>, <span class="number">2'b00</span>, <span class="number">6'b010000</span>&#125;; <span class="comment">// SCALE_SCH=10 11 10 IFFT CP_LEN=16</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (s_axis_config_tready) <span class="keyword">begin</span></span><br><span class="line">        s_axis_config_tvalid &lt;= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        s_axis_config_tvalid &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p><h4 id="IFFT-Simulation"><a href="#IFFT-Simulation" class="headerlink" title="IFFT Simulation"></a>IFFT Simulation</h4><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/ifft-modelsim-part-1" alt="ifft-modelsim-part-1"></p><p>å¯è§è¾“å‡ºåŒ…æ‹¬äº†å¾ªç¯å‰ç¼€ï¼ˆIPæ ¸åŠŸèƒ½ï¼‰ï¼Œä¸”å­˜åœ¨ä¸€å®šçš„æ—¶å»¶</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;IFFF-Port-defination&quot;&gt;&lt;a href=&quot;#IFFF-Port-defination&quot; class=&quot;headerlink&quot; title=&quot;IFFF Port defination&quot;&gt;&lt;/a&gt;IFFF Port defination&lt;/h4&gt;&lt;
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 5.æ’å…¥å¯¼é¢‘</title>
    <link href="http://pa.radonyl.xyz/2019/11/05/802-11g-Transmitter-5-pilot-aboard/"/>
    <id>http://pa.radonyl.xyz/2019/11/05/802-11g-Transmitter-5-pilot-aboard/</id>
    <published>2019-11-05T09:11:50.000Z</published>
    <updated>2019-12-01T12:19:19.758Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Pilot-Aboard-Port-defination"><a href="#Pilot-Aboard-Port-defination" class="headerlink" title="Pilot Aboard Port defination"></a>Pilot Aboard Port defination</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> stream_pilot_aboard(</span><br><span class="line">    <span class="keyword">input</span> rst_n,</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> start_frame,</span><br><span class="line">    <span class="keyword">input</span> din_valid,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">7</span>:<span class="number">0</span>] din_re,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">7</span>:<span class="number">0</span>] din_im,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">5</span>:<span class="number">0</span>] din_index,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] dout_re,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] dout_im,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> dout_valid</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><h4 id="OFDM-Modulation"><a href="#OFDM-Modulation" class="headerlink" title="OFDM Modulation"></a>OFDM Modulation</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> (din_index_buf) <span class="comment">// iFFT sub-carrier map</span></span><br><span class="line">    <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>:</span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= din_index_buf + <span class="number">38</span>;</span><br><span class="line">    <span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>:</span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= din_index_buf + <span class="number">39</span>;</span><br><span class="line">    <span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>: </span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= din_index_buf + <span class="number">40</span>;</span><br><span class="line">    <span class="number">24</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">29</span>:</span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= din_index_buf - <span class="number">23</span>; </span><br><span class="line">    <span class="number">30</span>,<span class="number">31</span>,<span class="number">32</span>,<span class="number">33</span>,<span class="number">34</span>,<span class="number">35</span>,<span class="number">36</span>,<span class="number">37</span>,<span class="number">38</span>,<span class="number">39</span>,<span class="number">40</span>,<span class="number">41</span>,<span class="number">42</span>:</span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= din_index_buf - <span class="number">22</span>;</span><br><span class="line">    <span class="number">43</span>,<span class="number">44</span>,<span class="number">45</span>,<span class="number">46</span>,<span class="number">47</span> : </span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= din_index_buf - <span class="number">21</span>;</span><br><span class="line">    <span class="keyword">default</span> :</span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">endcase</span></span><br></pre></td></tr></table></figure><h4 id="Pilot-Insertion"><a href="#Pilot-Insertion" class="headerlink" title="Pilot Insertion"></a>Pilot Insertion</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> (pilot_postion)</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1 -1  1  1</span></span><br><span class="line"><span class="comment">       -1  1 -1 -1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="number">2'b00</span>: <span class="keyword">begin</span></span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= <span class="number">7</span>;</span><br><span class="line">        <span class="keyword">if</span> (!pilot_polarity)</span><br><span class="line">            ram_din_re &lt;= <span class="number">8'b01000000</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ram_din_re &lt;= <span class="number">8'b11000000</span>;</span><br><span class="line">        pilot_postion &lt;= pilot_postion + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="number">2'b01</span>: <span class="keyword">begin</span></span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= <span class="number">21</span>;</span><br><span class="line">        <span class="keyword">if</span> (!pilot_polarity)</span><br><span class="line">            ram_din_re &lt;= <span class="number">8'b11000000</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ram_din_re &lt;= <span class="number">8'b01000000</span>;</span><br><span class="line">        pilot_postion &lt;= pilot_postion + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="number">2'b10</span>: <span class="keyword">begin</span></span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= <span class="number">43</span>;</span><br><span class="line">        <span class="keyword">if</span> (!pilot_polarity)</span><br><span class="line">            ram_din_re &lt;= <span class="number">8'b01000000</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ram_din_re &lt;= <span class="number">8'b11000000</span>;</span><br><span class="line">        pilot_postion &lt;= pilot_postion + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="number">2'b11</span>: <span class="keyword">begin</span></span><br><span class="line">        write_addr[<span class="number">5</span>:<span class="number">0</span>] &lt;= <span class="number">57</span>;</span><br><span class="line">        <span class="keyword">if</span> (!pilot_polarity)</span><br><span class="line">            ram_din_re &lt;= <span class="number">8'b01000000</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ram_din_re &lt;= <span class="number">8'b11000000</span>;</span><br><span class="line">        pilot_postion &lt;= <span class="number">0</span>;</span><br><span class="line">        pilot_aboard_start &lt;= <span class="number">0</span>;</span><br><span class="line">        read_en &lt;= <span class="number">1</span>;</span><br><span class="line">        write_addr_sel &lt;= ~write_addr_sel;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endcase</span></span><br></pre></td></tr></table></figure><h4 id="Simulation"><a href="#Simulation" class="headerlink" title="Simulation"></a>Simulation</h4><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/pilot-aboard-isim-1" alt="pilot-aboard-isim-1"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;Pilot-Aboard-Port-defination&quot;&gt;&lt;a href=&quot;#Pilot-Aboard-Port-defination&quot; class=&quot;headerlink&quot; title=&quot;Pilot Aboard Port defination&quot;&gt;&lt;/a&gt;Pi
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 4.æ˜Ÿåº§æ˜ å°„</title>
    <link href="http://pa.radonyl.xyz/2019/11/04/802-11g-Transmitter-4-constellation/"/>
    <id>http://pa.radonyl.xyz/2019/11/04/802-11g-Transmitter-4-constellation/</id>
    <published>2019-11-04T09:10:27.000Z</published>
    <updated>2019-12-01T12:17:26.296Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Constellation-Port-defination"><a href="#Constellation-Port-defination" class="headerlink" title="Constellation Port defination"></a>Constellation Port defination</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> stream_constellate(</span><br><span class="line">    <span class="keyword">input</span> rst_n,</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> din,</span><br><span class="line">    <span class="keyword">input</span> en,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] sig_rate,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] re,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] im,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">5</span>:<span class="number">0</span>] index,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> data_valid</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><h4 id="Constellation"><a href="#Constellation" class="headerlink" title="Constellation"></a>Constellation</h4><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// constellation map</span></span><br><span class="line"><span class="keyword">reg</span> map_valid;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] re_temp;</span><br><span class="line"><span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] im_temp;</span><br><span class="line"><span class="keyword">always</span> @ (<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst_n) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (!rst_n) <span class="keyword">begin</span></span><br><span class="line">        re_temp &lt;= <span class="number">0</span>;</span><br><span class="line">        im_temp &lt;= <span class="number">0</span>;</span><br><span class="line">        map_valid &lt;= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (buf_data_valid) <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">case</span> (sig_rate)</span><br><span class="line">                <span class="comment">// BPSK</span></span><br><span class="line">                <span class="number">4'b1101</span>, <span class="number">4'b1111</span>: <span class="keyword">begin</span></span><br><span class="line">                    <span class="comment">// Scaler=1</span></span><br><span class="line">                    <span class="keyword">case</span> (pre_map_buffer[<span class="number">0</span>])</span><br><span class="line">                        <span class="number">1'b0</span>: re_temp &lt;= <span class="number">8'b11000000</span>; <span class="comment">// -1</span></span><br><span class="line">                        <span class="number">1'b1</span>: re_temp &lt;= <span class="number">8'b01000000</span>; <span class="comment">// 1</span></span><br><span class="line">                    <span class="keyword">endcase</span></span><br><span class="line">                    im_temp &lt;= <span class="number">0</span>;</span><br><span class="line">                    map_valid &lt;= <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                <span class="comment">// QPSK</span></span><br><span class="line">                <span class="number">4'b0101</span>, <span class="number">4'b0111</span>: <span class="keyword">begin</span></span><br><span class="line">                    <span class="comment">// Scaler=sqrt(2)</span></span><br><span class="line">                    <span class="keyword">case</span> (pre_map_buffer[<span class="number">0</span>])</span><br><span class="line">                        <span class="number">1'b0</span>: re_temp &lt;= <span class="number">8'b11010011</span>; <span class="comment">// -1</span></span><br><span class="line">                        <span class="number">1'b1</span>: re_temp &lt;= <span class="number">8'b00101101</span>; <span class="comment">// 1</span></span><br><span class="line">                    <span class="keyword">endcase</span></span><br><span class="line">                    <span class="keyword">case</span> (pre_map_buffer[<span class="number">1</span>])</span><br><span class="line">                        <span class="number">1'b0</span>: im_temp &lt;= <span class="number">8'b11010011</span>; <span class="comment">// -1</span></span><br><span class="line">                        <span class="number">1'b1</span>: im_temp &lt;= <span class="number">8'b00101101</span>; <span class="comment">// 1</span></span><br><span class="line">                    <span class="keyword">endcase</span></span><br><span class="line">                    map_valid &lt;= <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                <span class="comment">// 16QAM</span></span><br><span class="line">                <span class="number">4'b1001</span>, <span class="number">4'b1011</span>: <span class="keyword">begin</span></span><br><span class="line">                    <span class="comment">// Scaler=sqrt(10)</span></span><br><span class="line">                    <span class="keyword">case</span> (pre_map_buffer[<span class="number">1</span>:<span class="number">0</span>])</span><br><span class="line">                        <span class="number">2'b00</span>: re_temp &lt;= <span class="number">8'b11000011</span>; <span class="comment">// -3</span></span><br><span class="line">                        <span class="number">2'b10</span>: re_temp &lt;= <span class="number">8'b11101100</span>; <span class="comment">// -1</span></span><br><span class="line">                        <span class="number">2'b11</span>: re_temp &lt;= <span class="number">8'b00010100</span>; <span class="comment">// 1</span></span><br><span class="line">                        <span class="number">2'b01</span>: re_temp &lt;= <span class="number">8'b00111101</span>; <span class="comment">// 3</span></span><br><span class="line">                    <span class="keyword">endcase</span></span><br><span class="line">                    <span class="keyword">case</span> (pre_map_buffer[<span class="number">3</span>:<span class="number">2</span>])</span><br><span class="line">                        <span class="number">2'b00</span>: im_temp &lt;= <span class="number">8'b11000011</span>; <span class="comment">// -3</span></span><br><span class="line">                        <span class="number">2'b10</span>: im_temp &lt;= <span class="number">8'b11101100</span>; <span class="comment">// -1</span></span><br><span class="line">                        <span class="number">2'b11</span>: im_temp &lt;= <span class="number">8'b00010100</span>; <span class="comment">// 1</span></span><br><span class="line">                        <span class="number">2'b01</span>: im_temp &lt;= <span class="number">8'b00111101</span>; <span class="comment">// 3</span></span><br><span class="line">                    <span class="keyword">endcase</span></span><br><span class="line">                    map_valid &lt;= <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                <span class="comment">// 64QAM</span></span><br><span class="line">                <span class="number">4'b0001</span>, <span class="number">4'b0011</span>: <span class="keyword">begin</span></span><br><span class="line">                    <span class="comment">// Scaler=sqrt(42)</span></span><br><span class="line">                    <span class="keyword">case</span> (pre_map_buffer[<span class="number">2</span>:<span class="number">0</span>])</span><br><span class="line">                        <span class="number">3'b000</span>: re_temp &lt;= <span class="number">8'b10111011</span>; <span class="comment">// -7</span></span><br><span class="line">                        <span class="number">3'b001</span>: re_temp &lt;= <span class="number">8'b11001111</span>; <span class="comment">// -5</span></span><br><span class="line">                        <span class="number">3'b011</span>: re_temp &lt;= <span class="number">8'b11100010</span>; <span class="comment">// -3</span></span><br><span class="line">                        <span class="number">3'b010</span>: re_temp &lt;= <span class="number">8'b11110110</span>; <span class="comment">// -1</span></span><br><span class="line">                        <span class="number">3'b110</span>: re_temp &lt;= <span class="number">8'b00001010</span>; <span class="comment">// 1</span></span><br><span class="line">                        <span class="number">3'b111</span>: re_temp &lt;= <span class="number">8'b00011110</span>; <span class="comment">// 3</span></span><br><span class="line">                        <span class="number">3'b101</span>: re_temp &lt;= <span class="number">8'b00110001</span>; <span class="comment">// 5</span></span><br><span class="line">                        <span class="number">3'b100</span>: re_temp &lt;= <span class="number">8'b01000101</span>; <span class="comment">// 7</span></span><br><span class="line">                    <span class="keyword">endcase</span></span><br><span class="line">                    <span class="keyword">case</span> (pre_map_buffer[<span class="number">5</span>:<span class="number">3</span>])</span><br><span class="line">                        <span class="number">3'b000</span>: im_temp &lt;= <span class="number">8'b10111011</span>; <span class="comment">// -7</span></span><br><span class="line">                        <span class="number">3'b001</span>: im_temp &lt;= <span class="number">8'b11001111</span>; <span class="comment">// -5</span></span><br><span class="line">                        <span class="number">3'b011</span>: im_temp &lt;= <span class="number">8'b11100010</span>; <span class="comment">// -3</span></span><br><span class="line">                        <span class="number">3'b010</span>: im_temp &lt;= <span class="number">8'b11110110</span>; <span class="comment">// -1</span></span><br><span class="line">                        <span class="number">3'b110</span>: im_temp &lt;= <span class="number">8'b00001010</span>; <span class="comment">// 1</span></span><br><span class="line">                        <span class="number">3'b111</span>: im_temp &lt;= <span class="number">8'b00011110</span>; <span class="comment">// 3</span></span><br><span class="line">                        <span class="number">3'b101</span>: im_temp &lt;= <span class="number">8'b00110001</span>; <span class="comment">// 5</span></span><br><span class="line">                        <span class="number">3'b100</span>: im_temp &lt;= <span class="number">8'b01000101</span>; <span class="comment">// 7</span></span><br><span class="line">                    <span class="keyword">endcase</span></span><br><span class="line">                    map_valid &lt;= <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                <span class="comment">// Invalid SIG_RATE input!</span></span><br><span class="line">                <span class="keyword">default</span>: <span class="keyword">begin</span></span><br><span class="line">                    re_temp &lt;= <span class="number">0</span>;</span><br><span class="line">                    im_temp &lt;= <span class="number">0</span>;</span><br><span class="line">                    map_valid &lt;= <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">endcase</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            map_valid &lt;= <span class="number">0</span>;</span><br><span class="line">            re_temp &lt;= <span class="number">0</span>;</span><br><span class="line">            im_temp &lt;= <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>BPSK modulation simulation<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/bpsk-mod-isim-1" alt="bpsk-mod-isim-1"></p><p>QPSK<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/qpsk-mod-isim-1" alt="qpsk-mod-isim-1"></p><p>16QAM<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/16qam-mod-isim-1" alt="16qam-mod-isim-1"></p><p>64QAM<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/64qam-mod-isim-1" alt="64qam-mod-isim-1"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;Constellation-Port-defination&quot;&gt;&lt;a href=&quot;#Constellation-Port-defination&quot; class=&quot;headerlink&quot; title=&quot;Constellation Port defination&quot;&gt;&lt;/a
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 3.äº¤ç»‡</title>
    <link href="http://pa.radonyl.xyz/2019/11/03/802-11g-Transmitter-3-interleaver/"/>
    <id>http://pa.radonyl.xyz/2019/11/03/802-11g-Transmitter-3-interleaver/</id>
    <published>2019-11-03T09:10:04.000Z</published>
    <updated>2019-12-01T12:19:27.361Z</updated>
    
    <content type="html"><![CDATA[<p>äº¤ç»‡å™¨è¾“å…¥è¾“å‡ºç«¯å£<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> stream_interleaver(</span><br><span class="line">    <span class="keyword">input</span> rst_n,</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> din,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">8</span>:<span class="number">0</span>] din_index,</span><br><span class="line">    <span class="keyword">input</span> en,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] sig_rate,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> dout,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> data_valid</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><br>äº¤ç»‡å™¨ä»£ç (ç¬¬ä¸€çº§äº¤ç»‡å†™å…¥åœ°å€ç”Ÿæˆ)<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BPSK 48</span></span><br><span class="line"><span class="number">4'b1101</span>, <span class="number">4'b1111</span>: <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (!write_addr_sel_1)</span><br><span class="line">        write_addr_1 &lt;= din_index[<span class="number">3</span>:<span class="number">0</span>] + (din_index[<span class="number">3</span>:<span class="number">0</span>] &lt;&lt; <span class="number">1</span>) + din_index[<span class="number">5</span>:<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        write_addr_1 &lt;= din_index[<span class="number">3</span>:<span class="number">0</span>] + (din_index[<span class="number">3</span>:<span class="number">0</span>] &lt;&lt; <span class="number">1</span>) + din_index[<span class="number">5</span>:<span class="number">4</span>] + <span class="number">48</span>;</span><br><span class="line">    <span class="keyword">if</span> (din_index == <span class="number">47</span>) <span class="keyword">begin</span></span><br><span class="line">        write_addr_sel_1 &lt;= ~write_addr_sel_1;</span><br><span class="line">        read_en_1 &lt;= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><br>äº¤ç»‡å™¨ä»£ç (ç¬¬äºŒçº§äº¤ç»‡å†™å…¥åœ°å€ç”Ÿæˆ)<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BPSK QPSK no need for 2nd itv</span></span><br><span class="line"><span class="number">4'b1101</span>, <span class="number">4'b1111</span>, <span class="number">4'b0101</span>, <span class="number">4'b0111</span>: <span class="keyword">begin</span></span><br><span class="line">    write_addr_2 &lt;= din_index_2;</span><br><span class="line">    <span class="keyword">if</span> (din_index_2 == <span class="number">11</span> || din_index_2 == <span class="number">23</span>) <span class="keyword">begin</span></span><br><span class="line">        read_en_2 &lt;= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> (din_index_2 &lt; <span class="number">23</span>)</span><br><span class="line">        din_index_2 &lt;= din_index_2 + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        din_index_2 &lt;= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><br>ä»¿çœŸç»“æœ<br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/interleaver-isim-1" alt="interleaver-isim-1"></p><p>ç”±äºäº¤ç»‡çš„ç‰¹æ€§ï¼Œå¯è§äº¤ç»‡å¿…é¡»ç­‰æ•°æ®å…¨éƒ¨å†™å…¥åæ‰å¯ä»¥è¯»å‡ºï¼Œè¿™é‡Œä¸ºå‘å°„æœºå¼•å…¥äº†æ—¶å»¶</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;äº¤ç»‡å™¨è¾“å…¥è¾“å‡ºç«¯å£&lt;br&gt;&lt;figure class=&quot;highlight verilog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/sp
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 2.å·ç§¯ç¼–ç </title>
    <link href="http://pa.radonyl.xyz/2019/11/02/802-11g-Transmitter-2-conv-encoder/"/>
    <id>http://pa.radonyl.xyz/2019/11/02/802-11g-Transmitter-2-conv-encoder/</id>
    <published>2019-11-02T09:08:49.000Z</published>
    <updated>2019-12-01T12:42:08.256Z</updated>
    
    <content type="html"><![CDATA[<p>å·ç§¯ç¼–ç å™¨è¾“å…¥è¾“å‡ºç«¯å£<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> stream_conv_encode(<span class="keyword">input</span> rst_n,</span><br><span class="line">                          <span class="keyword">input</span> start_frame,</span><br><span class="line">                          <span class="keyword">input</span> clk_din,</span><br><span class="line">                          <span class="keyword">input</span> clk_dout,</span><br><span class="line">                          <span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] sig_rate,</span><br><span class="line">                          <span class="keyword">input</span> din,</span><br><span class="line">                          <span class="keyword">input</span> en,</span><br><span class="line">                          <span class="keyword">output</span> <span class="keyword">reg</span> dout,</span><br><span class="line">                          <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">8</span>:<span class="number">0</span>] index,</span><br><span class="line">                          <span class="keyword">output</span> <span class="keyword">reg</span> data_valid);</span><br></pre></td></tr></table></figure></p><p>å·ç§¯ç¼–ç å™¨æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> conv_encoder(<span class="keyword">input</span> rst_n,</span><br><span class="line">                    <span class="keyword">input</span> clk,</span><br><span class="line">                    <span class="keyword">input</span> din,</span><br><span class="line">                    <span class="keyword">input</span> en,</span><br><span class="line">                    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">1</span>:<span class="number">0</span>] dout,</span><br><span class="line">                    <span class="keyword">output</span> <span class="keyword">reg</span> data_valid);</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">6</span>:<span class="number">1</span>] shift_reg;</span><br><span class="line">    <span class="keyword">always</span> @ (<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst_n) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (!rst_n) <span class="keyword">begin</span></span><br><span class="line">            shift_reg  &lt;= <span class="number">6'd0</span>;</span><br><span class="line">            dout       &lt;= <span class="number">2'd0</span>;</span><br><span class="line">            data_valid &lt;= <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span> (en) <span class="keyword">begin</span></span><br><span class="line">                dout[<span class="number">0</span>]    &lt;= shift_reg[<span class="number">6</span>] + shift_reg[<span class="number">5</span>] + shift_reg[<span class="number">3</span>] + shift_reg[<span class="number">2</span>] + din;</span><br><span class="line">                dout[<span class="number">1</span>]    &lt;= shift_reg[<span class="number">6</span>] + shift_reg[<span class="number">3</span>] + shift_reg[<span class="number">2</span>] + shift_reg[<span class="number">1</span>] + din;</span><br><span class="line">                data_valid &lt;= <span class="number">1</span>;</span><br><span class="line">                shift_reg  &lt;= &#123;shift_reg[<span class="number">5</span>:<span class="number">1</span>], din&#125;;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                data_valid &lt;= <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure></p><h4 id="ä»¿çœŸå›¾åƒ"><a href="#ä»¿çœŸå›¾åƒ" class="headerlink" title="ä»¿çœŸå›¾åƒ"></a>ä»¿çœŸå›¾åƒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç”±IEEE802.11-2007é™„å½•G</span><br><span class="line">// è¾“å…¥åºåˆ—ä¸º</span><br><span class="line">24&apos;b101100010011000000000000</span><br><span class="line">// è¾“å‡ºåºåˆ—åº”ä¸º</span><br><span class="line">48&apos;b110100011010000100000010001111100111000000000000</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/conv-encoder-isim-1" alt="conv-encoder-isim-1"></p><p>å¯è§ä»¿çœŸä¸ç†è®ºç›¸å»åˆ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å·ç§¯ç¼–ç å™¨è¾“å…¥è¾“å‡ºç«¯å£&lt;br&gt;&lt;figure class=&quot;highlight verilog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ğŸ“¡ 802.11g å‘å°„æœº | 1. æ‰°ç </title>
    <link href="http://pa.radonyl.xyz/2019/11/01/802-11g-Transmitter-1-Scrambler/"/>
    <id>http://pa.radonyl.xyz/2019/11/01/802-11g-Transmitter-1-Scrambler/</id>
    <published>2019-11-01T14:46:32.000Z</published>
    <updated>2019-12-01T12:36:03.481Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰°ç å™¨ï¼ˆSreamblerï¼‰æ˜¯ä»€ä¹ˆï¼Ÿæ‰°ç æ˜¯æœ¬è´¨ä¸Šæ˜¯å°†éœ€è¦ä¼ è¾“çš„æ•°æ®è¿›è¡ŒéšæœºåŒ–å¤„ç†ï¼Œé€šè¿‡æŠŠè¾“å…¥æ•°æ®â€œè€¦åˆâ€åˆ°ä¸€ä¸ªéšæœºåºåˆ—ä¸Šæ¥å®ç°ï¼Œè€Œåºåˆ—çš„éšæœºæ€§èƒ½å°±ä¿è¯é€šä¿¡æ€§èƒ½çš„å¹³ç¨³æ€§ã€‚<br><a id="more"></a></p><p>802.11-2007 <strong>17.3.5.4 PLCP DATA scrambler and descrambler</strong>è§„å®šDATA fieldåº”è¯¥ä½¿ç”¨ä¸€ä¸ªé•¿127çš„å¸§åŒæ­¥æ‰°ç å™¨è¿›è¡Œæ‰°ç ï¼Œè¯¥æ‰°ç å™¨ä½¿ç”¨ç”Ÿæˆå¦‚ä¸‹ç”Ÿæˆå¤šé¡¹å¼ï¼š</p><script type="math/tex; mode=display">S(x)=x^7+x^4+1</script><p>è¿™ä¸ªç”Ÿæˆå¤šé¡¹å¼å¯¹åº”äº†ä¸€ä¸ªåé¦ˆç§»ä½å¯„å­˜å™¨ç»“æ„ï¼š</p><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/Figure-17-7-Data-scrambler" alt="Figure-17-7-Data-scrambler"></p><p>å·¦ä¾§çš„åé¦ˆç§»ä½å¯„å­˜å™¨æ„æˆäº†ä¸€ä¸ªå‘¨æœŸä¸º127çš„éšæœºåºåˆ—å‘ç”Ÿå™¨ï¼Œå…¶å‘ç”Ÿåºåˆ—åªä¸ç§»ä½å¯„å­˜å™¨çš„åˆå§‹çŠ¶æ€æœ‰å…³ï¼Œåœ¨åˆå§‹çŠ¶æ€å…¨0çš„çŠ¶æ€ä¸‹å…¶è¾“å‡ºåºåˆ—ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">00001110 11110010 11001001 00000010 00100110 00101110</span><br><span class="line">10110110 00001100 11010100 11100111 10110100 00101010 </span><br><span class="line">11111010 01010001 10111000 1111111</span><br></pre></td></tr></table></figure><br>éšæœºåºåˆ—ä¸è¾“å…¥åºåˆ—è¿›è¡Œå¼‚æˆ–è¿ç®—å¾—å‡ºæ‰°ç åºåˆ—ï¼Œåœ¨æ¥æ”¶ç«¯ä½¿ç”¨åŒæ ·çš„éšæœºåºåˆ—ä¸æ‰°ç åºåˆ—å¼‚æˆ–å³å¯æ¢å¤åŸè¾“å…¥åºåˆ—ï¼Œè¿™é‡Œåˆ©ç”¨åˆ°çš„åŸç†æ˜¯ï¼š</p><script type="math/tex; mode=display">\begin{split}Trans(x) = & Input(x) \oplus S(x) \\\\Recv(x) = & Trans(x) \oplus S(x) \\\\= & Input(x) \oplus S(x) \oplus S(x) \\\\= & Input(x) \oplus 0 \\\\= & Input(x)\end{split}</script><p>ç”±äºéšæœºåºåˆ—åªä¸ç§»ä½å¯„å­˜å™¨çš„åˆå§‹çŠ¶æ€æœ‰å…³ï¼Œåªéœ€è¦å‘å°„æœºä¸æ¥æ”¶æœºçº¦å®šä½¿ç”¨å…±åŒçš„åˆå§‹å€¼ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡å‘å°„å‰è¿›è¡Œé‡ç½®å³å¯ä¿è¯åŠ æ‰°åºåˆ—å¯ä»¥åœ¨æ¥æ”¶ç«¯è¿›è¡Œè§£æ‰°ï¼Œ802.11è§„å®šè¯¥åˆå§‹å€¼ä¸º1011101ã€‚</p><h1 id="Verilogå®ç°"><a href="#Verilogå®ç°" class="headerlink" title="Verilogå®ç°"></a>Verilogå®ç°</h1><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> stream_scramble(</span><br><span class="line">    <span class="keyword">input</span> rst_n,</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> din,</span><br><span class="line">    <span class="keyword">input</span> en,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">7</span>:<span class="number">1</span>] seed,</span><br><span class="line">    <span class="keyword">input</span> start_frame,</span><br><span class="line">    <span class="keyword">input</span> [<span class="number">11</span>:<span class="number">0</span>] sig_length, <span class="comment">// used for zeroing tail bits</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> dout,</span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> data_valid</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">1</span>] scrambler;</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">12</span>:<span class="number">0</span>] bit_counter;</span><br><span class="line">    <span class="keyword">always</span> @ (<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">negedge</span> rst_n) <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (!rst_n) <span class="keyword">begin</span></span><br><span class="line">            dout &lt;= <span class="number">0</span>;</span><br><span class="line">            data_valid &lt;= <span class="number">0</span>;</span><br><span class="line">            scrambler &lt;= <span class="number">0</span>;</span><br><span class="line">            bit_counter &lt;= <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span> (start_frame) <span class="keyword">begin</span></span><br><span class="line">                scrambler &lt;= seed;</span><br><span class="line">                bit_counter &lt;= <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                <span class="keyword">if</span> (en) <span class="keyword">begin</span></span><br><span class="line">                    <span class="comment">// zeroing tail bits</span></span><br><span class="line">                    dout &lt;= (bit_counter &gt;= sig_length * <span class="number">8</span> + <span class="number">16</span> &amp;&amp; bit_counter &lt; sig_length * <span class="number">8</span> + <span class="number">22</span>) ? <span class="number">0</span> : </span><br><span class="line">                            din + scrambler[<span class="number">7</span>] + scrambler[<span class="number">4</span>];</span><br><span class="line">                    data_valid &lt;= <span class="number">1</span>;</span><br><span class="line">                    scrambler &lt;= &#123;scrambler[<span class="number">6</span>:<span class="number">1</span>], scrambler[<span class="number">7</span>] + scrambler[<span class="number">4</span>]&#125;;</span><br><span class="line">                    bit_counter &lt;= bit_counter + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                    dout &lt;= <span class="number">0</span>;</span><br><span class="line">                    data_valid &lt;= <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure><h4 id="ä»¿çœŸ"><a href="#ä»¿çœŸ" class="headerlink" title="ä»¿çœŸ"></a>ä»¿çœŸ</h4><p>å°†æ‰°ç å™¨ç½®äºå…¨1çš„åˆå§‹å€¼ï¼Œåœ¨å…¨0è¾“å…¥çš„æƒ…å†µä¸‹è§‚å¯Ÿæ‰°ç å™¨çš„è¾“å‡ºï¼Œå…¶åºåˆ—åº”è¯¥æ»¡è¶³ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">00001110 11110010 11001001 00000010 00100110 00101110</span><br><span class="line">10110110 00001100 11010100 11100111 10110100 00101010 </span><br><span class="line">11111010 01010001 10111000 1111111</span><br></pre></td></tr></table></figure><br><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/scrambler-isim-2" alt="scrambler-isim-2"><br>å¯¹æ¯”å‘ç°ä»¿çœŸä¸è¦æ±‚ç›¸å»åˆã€‚</p><h4 id="åŸºå¸¦æ•°æ®ä¸æ‰°ç å™¨è¾“å‡º"><a href="#åŸºå¸¦æ•°æ®ä¸æ‰°ç å™¨è¾“å‡º" class="headerlink" title="åŸºå¸¦æ•°æ®ä¸æ‰°ç å™¨è¾“å‡º"></a>åŸºå¸¦æ•°æ®ä¸æ‰°ç å™¨è¾“å‡º</h4><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/baseband_bits" alt="baseband_bits"></p><h4 id="æ²¡æœ‰æ‰°ç å™¨æ—¶"><a href="#æ²¡æœ‰æ‰°ç å™¨æ—¶" class="headerlink" title="æ²¡æœ‰æ‰°ç å™¨æ—¶"></a>æ²¡æœ‰æ‰°ç å™¨æ—¶</h4><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/baseband_time_domin_without_scrambler" alt="baseband_time_domin_without_scrambler"></p><h4 id="æ·»åŠ æ‰°ç å™¨å"><a href="#æ·»åŠ æ‰°ç å™¨å" class="headerlink" title="æ·»åŠ æ‰°ç å™¨å"></a>æ·»åŠ æ‰°ç å™¨å</h4><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/baseband_time_domain_with_scrambler" alt="baseband_time_domain_with_scrambler"></p><p>åœ¨åŸºå¸¦ä¿¡å·ä¸­ï¼Œå¯è§å­˜åœ¨å¤§é‡çš„è¿ç»­çš„0å’Œ1ï¼Œå½“æ²¡æœ‰æ‰°ç å™¨æ—¶ï¼Œäº§ç”Ÿçš„æ—¶åŸŸä¿¡å·å­˜åœ¨éå¸¸æ˜æ˜¾çš„å‘¨æœŸæ€§ï¼Œä¸”å‡ºç°äº†å¤§é‡çš„å³°å€¼ï¼ŒEVMæ¶åŒ–ã€‚åœ¨æ·»åŠ æ‰°ç å™¨åæƒ…å†µæ˜æ˜¾æ”¹å–„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‰°ç å™¨ï¼ˆSreamblerï¼‰æ˜¯ä»€ä¹ˆï¼Ÿæ‰°ç æ˜¯æœ¬è´¨ä¸Šæ˜¯å°†éœ€è¦ä¼ è¾“çš„æ•°æ®è¿›è¡ŒéšæœºåŒ–å¤„ç†ï¼Œé€šè¿‡æŠŠè¾“å…¥æ•°æ®â€œè€¦åˆâ€åˆ°ä¸€ä¸ªéšæœºåºåˆ—ä¸Šæ¥å®ç°ï¼Œè€Œåºåˆ—çš„éšæœºæ€§èƒ½å°±ä¿è¯é€šä¿¡æ€§èƒ½çš„å¹³ç¨³æ€§ã€‚&lt;br&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Let&#39;s share</title>
    <link href="http://pa.radonyl.xyz/2019/11/01/Let-s-share/"/>
    <id>http://pa.radonyl.xyz/2019/11/01/Let-s-share/</id>
    <published>2019-11-01T03:03:54.000Z</published>
    <updated>2019-11-01T14:44:39.845Z</updated>
    
    <content type="html"><![CDATA[<div class="tip">    è°¨ä»¥æ­¤åšå®¢å‘æ‰€æœ‰æ‰§ç€äºæ¢ç´¢çš„äººè‡´æ•¬</div><a id="more"></a><h1 id="The-Sunset"><a href="#The-Sunset" class="headerlink" title="The Sunset"></a>The Sunset</h1><p><em>é€‰è‡ªæ—¥è®°2017å¹´04æœˆ18æ—¥</em></p><p><img src="https://raw.githubusercontent.com/radonyl/pa_blog_img/master/img/20170418-å—é›…é«˜ä¸‰æ¥¼çš„æ—¥è½" alt="20170418-å—é›…é«˜ä¸‰æ¥¼çš„æ—¥è½"></p><p>ä»Šå¤©æœ‰æ™šéœï¼<br>æ˜¨å¤©å¼€å§‹ï¼Œç»§ç»­å†™æ—¥è®°ï¼Œè®°ä½ä¸€äº›æ„ŸåŠ¨ä¸ç¬é—´ã€‚</p><blockquote><p>â€œæ„Ÿè§‰ä½ ä»Šå¤©å˜äº†ä¸ªäººï¼Œæ˜¯ä¸æ˜¯å“ªæ ¹ç­‹æ­é”™äº†â€</p></blockquote><p>ğŸ‚ğŸŒ§ï¸ä»™è¿™ä¹ˆè¯´ã€‚å¥¹è¿˜è·‘ç€å»çœ‹æˆ‘æ‹ç…§çš„åœ°æ–¹ã€‚</p><p>åšåšçš„äº‘å±‚å‹ä½åŠè¾¹å¤©ç©ºï¼Œèµ·åˆä¸å‡ºå½©ï¼Œå¾…å¤ªé˜³è§’åº¦å‹ä½ï¼Œæ©˜çº¢è‰²çš„ç«ç„°ä¾¿çƒ§å°½äº†å¤©ç©ºã€‚çœ‹åˆ°è¿™ä¸€å¹•ï¼Œæˆ‘ä¾¿æ‹¿èµ·æ‰‹æœºå¤ºé—¨è€Œå‡ºã€‚å¯æƒœçš„æ˜¯é«˜ä¸‰æ¥¼æˆåŠŸå¡ä½ï¼Œè®©æˆ‘æ²¡æ‹å‡ºä¸€å¼ å¥½çœ‹çš„ç…§ç‰‡ã€‚</p><p>å¤ªé˜³å‹ä½ï¼ŒåŸæœ¬å¼ºçƒˆçº¯ç™½çš„é˜³å…‰ä¹Ÿé¡ºç€æ°”æ°›å˜å¾—æŸ”å’Œé‡‘é»„ã€‚</p><blockquote><p>â€œæ‰¾ä¸€å¼ å¤ªé˜³ç…§å¾—åˆ°çš„é¤æ¡Œâ€â€”Waffle</p></blockquote><p>æ˜¯çš„ï¼Œæ­¤æ—¶åƒå®¶ä¸‡æˆ·çš„çª—å­éƒ½ä¼šæ¶Œå‡ºä¸€è‚¡é‡‘æµï¼Œæ´’åœ¨å¢™å£ä¸Šã€é¤æ¡Œä¸Šå’Œå§é“ºä¸Šã€‚ä¸æ­¤åŒæ—¶ï¼Œä»å¤–é¢çœ‹ï¼Œå»ºç­‘çš„çš„å¤–å¢™å‡è¢«ç²‰åˆ·æˆäº®ä¸½çš„æ©™é»„è‰²ï¼Œåˆæ‹¨åŠ¨äº†æˆ‘å†…å¿ƒçš„é‚£æ ¹â€œå¼¦â€ã€‚</p><p>é˜³å…‰å›ºç„¶ç½®äººäºç»æœ›ä¸å¸Œæœ›çš„ä¸¤é‡å¢ƒåœ°ã€‚å¯å°±ä»Šå¤©æ¥è¯´ï¼Œç»æœ›æ˜¯æ›´å¤šçš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;tip&quot;&gt;
    è°¨ä»¥æ­¤åšå®¢å‘æ‰€æœ‰æ‰§ç€äºæ¢ç´¢çš„äººè‡´æ•¬
&lt;/div&gt;
    
    </summary>
    
    
    
  </entry>
  
</feed>
